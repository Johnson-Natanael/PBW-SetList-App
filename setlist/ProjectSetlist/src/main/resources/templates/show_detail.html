<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="https://www.thymeleaf.org/extras/spring-security6">

<head>
    <title>Show Details</title>
    <link rel="stylesheet" href="/css/show_detail.css">
</head>

<body>
    <div class="show-background">
        <div class="show-background-blur" 
            th:style="'background-image: url(/uploads/artists/' + ${show.artist.imageFilename} + ');'">
        </div>
        
        <nav class="navbar">
            <div class="logo">
                <p>Setlist.fm</p>
            </div>
            <div class="menu">
                <a th:href="@{/}" class="active">Home</a>
                <a th:href="@{/artists}">Artists</a>
                <a href="#">Profile</a>
            </div>
            <div class="auth-links">
                <div sec:authorize="isAuthenticated()">
                    <a th:href="@{/logout}" class="btn">Logout</a>
                </div>
                <div sec:authorize="!isAuthenticated()">
                    <a th:href="@{/login}" class="btn">Login</a>
                    <a th:href="@{/register}" class="btn">Register</a>
                </div>
            </div>
        </nav>

        <div class="show-container">
            <div class="show-details">
                <h1>Show Details</h1>
                <p>Artist: <a th:href="@{/artists/{id}(id=${show.artist.id})}" th:text="${show.artist.name}"></a></p>
                <p>Date: <span th:text="${show.date}"></span></p>
                <p>Venue: <span th:text="${show.venue}"></span></p>
                <p>City: <span th:text="${show.city}"></span></p>
                <p>Country: <span th:text="${show.country}"></span></p>
            </div>
        </div>
    </div>

    <div class="setlist-wrapper">
        <div class="setlist-container">
            <h2>SETLIST</h2>
            <div th:if="${setlist != null}">
                <h3>Songs:</h3>
                <ol>
                    <li th:each="song : ${setlist.songs}" th:text="${song}"></li>
                </ol>

                <div sec:authorize="isAuthenticated()">
                    <a th:href="@{/setlists/{id}(id=${setlist.id})}" class="btn">Setlist Detail</a>
                </div>
            </div>
            <div th:if="${setlist == null}">
                <p>No setlist available for this show.</p>
                <div sec:authorize="isAuthenticated()">
                    <a th:href="@{/setlists/add(showId=${show.id})}" class="btn btn-primary">Add Setlist</a>
                </div>
            </div>
        </div>
    </div>
</body>

</html>